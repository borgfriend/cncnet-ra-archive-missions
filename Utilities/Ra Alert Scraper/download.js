var downloadLinks = [{"link":"http://ra.afraid.org/download.php/campaigns/ANewEraV20.zip","filename":"download\\Campaigns\\A New Era v2.0/ANewEraV20.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/amant111.zip","filename":"download\\Campaigns\\Aftermath Giant Ants Missions/amant111.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/amant112.zip","filename":"download\\Campaigns\\Aftermath Giant Ants Missions v1.12/amant112.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/ant.zip","filename":"download\\Campaigns\\Ants Revenge/ant.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/ant_am.zip","filename":"download\\Campaigns\\Ants Revenge (Aftermath version)/ant_am.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/bnt_upd.zip","filename":"download\\Campaigns\\Beginning of a New Technology (updated)/bnt_upd.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/cocaine.exe","filename":"download\\Campaigns\\Cocaine Revolt v1.0/cocaine.exe"},{"link":"http://ra.afraid.org/download.php/campaigns/covert_opps.zip","filename":"download\\Campaigns\\Covert Opps/covert_opps.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/crim120.zip","filename":"download\\Campaigns\\Crimson 1.2/crim120.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/crim_p12.zip","filename":"download\\Campaigns\\Crimson 1.2 Patch/crim_p12.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/cuba.zip","filename":"download\\Campaigns\\Cuba/cuba.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/deadly_war.zip","filename":"download\\Campaigns\\Deadly War/deadly_war.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/defect.zip","filename":"download\\Campaigns\\Defection Campaign/defect.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/dd.zip","filename":"download\\Campaigns\\Desert Destiny/dd.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/dd2.zip","filename":"download\\Campaigns\\Desert Destiny 2 - Fight For Tiberium/dd2.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/dd2fix.zip","filename":"download\\Campaigns\\Desert Destiny 2 Fix/dd2fix.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/desperation.zip","filename":"download\\Campaigns\\Desperation Campaign/desperation.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/destroya.zip","filename":"download\\Campaigns\\Destroy Angela/destroya.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/fabs.zip","filename":"download\\Campaigns\\F.A.B.S. (Full Alert Battle Stations)/fabs.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/genesis.zip","filename":"download\\Campaigns\\Flame Dancers_ Genesis/genesis.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/foxhunt.zip","filename":"download\\Campaigns\\Foxhunt v1.0/foxhunt.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/harborfront.zip","filename":"download\\Campaigns\\Harbor Front/harborfront.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/flinev10.zip","filename":"download\\Campaigns\\In The Line of Fire v1.0/flinev10.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/flmusic.zip","filename":"download\\Campaigns\\In The Line Of Fire_ Music Expansion Pack/flmusic.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/flinev03.zip","filename":"download\\Campaigns\\In The Line of Fire_ Patch/flinev03.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/magnus.zip","filename":"download\\Campaigns\\Magnus Impetus/magnus.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/campaign.zip","filename":"download\\Campaigns\\Mega Campaign Missions/campaign.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/dc1-4.zip","filename":"download\\Campaigns\\Mission 4 of Death Com 1/dc1-4.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/rarev.zip","filename":"download\\Campaigns\\Red Alert_ Revolution/rarev.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/ratd.zip","filename":"download\\Campaigns\\Red Alert_ Tiberium Dawn/ratd.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/riseofengland.zip","filename":"download\\Campaigns\\Rise of England/riseofengland.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/sinetaiwanwar.zip","filename":"download\\Campaigns\\Sine Taiwan War/sinetaiwanwar.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/smirnoff.zip","filename":"download\\Campaigns\\Smirnoff Campaign/smirnoff.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/sesb&rr_fixed.zip","filename":"download\\Campaigns\\Soviet Empire Strikes Back & Russian Resistance/sesb&rr_fixed.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/srev.zip","filename":"download\\Campaigns\\Soviets Revenge v1.0 (beta)/srev.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/stalin.zip","filename":"download\\Campaigns\\Stalin's Comeback/stalin.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/stalin2.zip","filename":"download\\Campaigns\\Stalin's Return/stalin2.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/dogs.zip","filename":"download\\Campaigns\\The Dogs of War/dogs.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/downfall.zip","filename":"download\\Campaigns\\The Downfall v1.1/downfall.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/lostw.zip","filename":"download\\Campaigns\\The Lost World/lostw.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/Nazi.zip","filename":"download\\Campaigns\\The Nazi Wargame/Nazi.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/thetest.zip","filename":"download\\Campaigns\\The Test/thetest.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/train.zip","filename":"download\\Campaigns\\Training Campaign/train.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/CampaignUltraq11a.zip","filename":"download\\Campaigns\\Ultraq Campaign - The Battle Between Good And Evil/CampaignUltraq11a.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/CampaignUltraq20b.exe","filename":"download\\Campaigns\\Ultraq Campaign 2.0b/CampaignUltraq20b.exe"},{"link":"http://ra.afraid.org/download.php/campaigns/CampaignUltraqSaves.zip","filename":"download\\Campaigns\\Ultraq Campaign 2.0b Savegames/CampaignUltraqSaves.zip"},{"link":"http://ra.afraid.org/download.php/campaigns/CampaignUltraq12b.zip","filename":"download\\Campaigns\\Ultraq Campaign Patch v1.2b/CampaignUltraq12b.zip"},]


var express = require('express');
var fs = require('fs');
var request = require('request');
var cheerio = require('cheerio');
var urlPkg = require("url");
var path = require("path");
var app = express();
var http = require('http');
var download = require("download-file");


function processDownloads() {
  console.log("Remaining:" + downloadLinks.length)
  if (downloadLinks.length !== 0) {
    let current = downloadLinks.pop();
    console.log("Downloading: " + JSON.stringify(current));
    download(current.link, { filename: current.filename }, (err) => { if (err !== false){
      console.log("Err: " + err);
    }  });
    setTimeout(() => {
      processDownloads()
    }, 10000);

  }
}

processDownloads();
